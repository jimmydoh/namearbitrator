{% extends '_base.html' %}
{% load staticfiles %}
{% block content %}
<div class="container">
	<div class="row">
        <div class="col-12 col-md-10 offset-md-1 col-lg-8 offset-lg-2">
			
			<div class="card">
				<div class="card-header">
					
					<ul class="nav nav-tabs card-header-tabs" role="tablist">
					  <li class="nav-item">
						<a class="nav-link active" data-toggle="tab" href="#{{ user_current.account }}-tab" role="tab">{{ user_current.account.first_name }}</a>
					  </li>
					  <li class="nav-item">
						<a class="nav-link" data-toggle="tab" href="#{{ user_partner.account }}-tab" role="tab">{{ user_partner.account.first_name }}</a>
					  </li>					  
					</ul>
				</div>				
				<div class="card-block">
					<div class="tab-content">
						<div class="tab-pane fade show active text-center" id="{{ user_current.account }}-tab" role="tabpanel">							
							<h6>{{ user_current }} has suggested {{ stat_user_current_suggestions.total }} names.</h6>
							<div class="row">
								<div class="col-12 col-md-12 col-lg-6">
									<canvas id="chart-{{ user_current.account }}-gender"></canvas>
								</div>
								<div class="col-12 col-md-12 col-lg-6">
									<canvas id="chart-{{ user_current.account }}-choices"></canvas>
								</div>
							</div>
						</div>
						<div class="tab-pane fade text-center" id="{{ user_partner.account }}-tab" role="tabpanel">							
							<h6>{{ user_partner }} has suggested {{ stat_user_partner_suggestions.total }} names.</h6>
							<div class="row">
								<div class="col-12 col-md-12 col-lg-6">
									<canvas id="chart-{{ user_partner.account }}-gender"></canvas>
								</div>
								<div class="col-12 col-md-12 col-lg-6">
									<canvas id="chart-{{ user_partner.account }}-choices"></canvas>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="card-footer text-center">
					<h3>{{ user_current_selection_group }}</h3>
					<h5>{{ stat_suggestions_total }} total suggestions</h5>
				</div>				
			</div>	

			<div id="msg-box" style="display: none;">
			</div>
			
		</div>
	</div>
</div>
{% endblock %}
{% block javascript %}
<script src="{% static 'js/Chart.bundle.min.js' %}"></script>
<script>
	var ctx_{{ user_current.account }}_gender = document.getElementById("chart-{{ user_current.account }}-gender");
	
	var data_{{ user_current.account }}_gender = {
		labels: [
			"Girl",
			"Boy",
		],
		datasets: [
			{
				data: [{{ stat_user_current_suggestions.girl }}, {{ stat_user_current_suggestions.boy }}],
				backgroundColor: [
					"rgba(255, 97, 131, 0.6)",
					"rgba(54, 162, 235, 0.6)"
				],
				hoverBackgroundColor: [
					"rgba(255, 97, 131, 0.6)",
					"rgba(54, 162, 235, 0.6)"
				]
			}]
	};
	
	var chart_{{ user_current.account }}_Gender = new Chart(ctx_{{ user_current.account }}_gender,{
		type: 'pie',
		data: data_{{ user_current.account }}_gender,
		options: {
			animation:{
				animateScale:true
			}
		}
	});
	
	
	
	var ctx_{{ user_current.account }}_choices = document.getElementById("chart-{{ user_current.account }}-choices");
	
	var data_{{ user_current.account }}_choices = {
		labels: [
			"Yes",
			"Maybe",
			"No",
		],
		datasets: [
			{
				data: [{{ stat_user_current_suggestions.yes }}, {{ stat_user_current_suggestions.maybe }}, {{ stat_user_current_suggestions.no }}],
				backgroundColor: [
					'rgba(88, 214, 141, 0.6)',
					'rgba(247, 220, 111, 0.6)',
					'rgba(231, 76, 60, 0.6)',
				],
				hoverBackgroundColor: [
					'rgba(88, 214, 141, 0.6)',
					'rgba(247, 220, 111, 0.6)',
					'rgba(231, 76, 60, 0.6)',
				]
			}]
	};
	
	var chart_{{ user_current.account }}_Choices = new Chart(ctx_{{ user_current.account }}_choices,{
		type: 'pie',
		data: data_{{ user_current.account }}_choices,
		options: {
			animation:{
				animateScale:true
			}
		}
	});
	
	
	
	
	var ctx_{{ user_partner.account }}_gender = document.getElementById("chart-{{ user_partner.account }}-gender");
	
	var data_{{ user_partner.account }}_gender = {
		labels: [
			"Girl",
			"Boy",
		],
		datasets: [
			{
				data: [{{ stat_user_partner_suggestions.girl }}, {{ stat_user_partner_suggestions.boy }}],
				backgroundColor: [
					"rgba(255, 97, 131, 0.6)",
					"rgba(54, 162, 235, 0.6)"
				],
				hoverBackgroundColor: [
					"rgba(255, 97, 131, 0.6)",
					"rgba(54, 162, 235, 0.6)"
				]
			}]
	};
	
	var chart_{{ user_partner.account }}_Gender = new Chart(ctx_{{ user_partner.account }}_gender,{
		type: 'pie',
		data: data_{{ user_partner.account }}_gender,
		options: {
			animation:{
				animateScale:true
			}
		}
	});
	
	
	
	var ctx_{{ user_partner.account }}_choices = document.getElementById("chart-{{ user_partner.account }}-choices");
	
	var data_{{ user_partner.account }}_choices = {
		labels: [
			"Yes",
			"Maybe",
			"No",
		],
		datasets: [
			{
				data: [{{ stat_user_partner_suggestions.yes }}, {{ stat_user_partner_suggestions.maybe }}, {{ stat_user_partner_suggestions.no }}],
				backgroundColor: [
					'rgba(88, 214, 141, 0.6)',
					'rgba(247, 220, 111, 0.6)',
					'rgba(231, 76, 60, 0.6)',
				],
				hoverBackgroundColor: [
					'rgba(88, 214, 141, 0.6)',
					'rgba(247, 220, 111, 0.6)',
					'rgba(231, 76, 60, 0.6)',
				]
			}]
	};
	
	var chart_{{ user_partner.account }}_Choices = new Chart(ctx_{{ user_partner.account }}_choices,{
		type: 'pie',
		data: data_{{ user_partner.account }}_choices,
		options: {
			animation:{
				animateScale:true
			}
		}
	});
</script>
<script src="{% static 'js/custom-analytics.js' %}"></script>
{% endblock %}